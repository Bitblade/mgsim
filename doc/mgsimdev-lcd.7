.\" Man page generated from reStructuredText.
.
.TH MGSIMDEV-LCD 7 "August 2012" "3.4.90-5937" ""
.SH NAME
mgsimdev-lcd \- Character matrix display pseudo-device in MGSim
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH DESCRIPTION
.sp
The MG matrix display is text\-oriented output device. It provides both
grid addressing of individual characters and a serial interface with
automatic management of line feeds, tabs and scrolling.
.sp
The matrix display is rendered in text mode on the terminal where
\fBmgsim\fP runs, using ANSI escape codes.
.sp
An I/O device of this type can be specified in MGSim using the device
type \fBLCD\fP\&.
.SH CONFIGURATION
.sp
Each \fBlcd\fP device support the following configuration variables:
.INDENT 0.0
.TP
.B \fB<dev>:LCDDisplayWidth\fP, \fB<dev>:LCDDisplayHeight\fP
Size in characters of the display device.
.TP
.B \fB<dev>:LCDOutputRow\fP, \fB<dev>:LCDOutputColumn\fP
Position in the terminal where the matrix display is rendered.
.TP
.B \fB<dev>:LCDBackgroundColor\fP, \fB<dev>:LCDForegroundColor\fP
Terminal colors to use when rendering the matrix display. This
uses standard ANSI color codes.
.TP
.B \fB<dev>:LCDTraceFile\fP
File name to output every byte sent to the matrix display.
.UNINDENT
.SH PROTOCOL
.SS Writing characters at specific positions
.sp
Sending \fII/O write\fP requests to the first WxH bytes, where W and H are
the display size in characters, causes the corresponding characters to
be displayed. Only printable characters are recognized.
.sp
The characters are organized in row\-major order, that is bytes
0...(W\-1) correspond to the first row of characters, W...(2W\-1) to the
second row, and so on.
.SS Accessing the display size
.sp
When queried using an \fII/O read\fP request to offset 0 and size 32 bits,
the pseudo\-device will report the matrix display size.  The low\-order
16 bits indicate the height, and the high\-order 16 bits indicate the
width. This must be accessed as a single 32\-bit operation.
.SS Serial output
.sp
The special offset W*H supports a serial output terminal with internal
display cursor.  Each character sent at that offset is printed at the
current cursor position, and the cursor position is modified
automatically. The pseudo\-terminal recognizes newline (\en),
tabulations (\et), form feeds (\ef), carriage returns (\er) and
backspaces (\eb). Lines wrap automatically, and outputs beyond the last
display line cause the existing characters to "scroll up".
.SH INTERFACE
.sp
The device presents itself to the I/O bus as a single device.
.TS
center;
|l|l|l|l|.
_
T{
Address
T}	T{
Access width
T}	T{
Mode
T}	T{
Description
T}
_
T{
0
T}	T{
4 bytes
T}	T{
Read
T}	T{
Display size (see below)
T}
_
T{
0 to W*H\-1
T}	T{
(any)
T}	T{
Write
T}	T{
Grid\-addressed output buffer
T}
_
T{
W*H
T}	T{
1 byte
T}	T{
Write
T}	T{
Serial output
T}
_
.TE
.SH SEE ALSO
.sp
mgsim(1), mgsimdoc(7)
.SH BUGS
.sp
Report bugs & suggest improvements to \fI\%microgrids@svp\-home.org\fP\&.
.SH AUTHOR
MGSim was created by Mike Lankamp. MGSim is now under
stewardship of the Microgrid project. This manual page was written
by Raphael 'kena' Poss.
.SH COPYRIGHT
Copyright (C) 2008-2012 the Microgrid project.
.\" Generated by docutils manpage writer.
.
